<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전체 선택</title>
    <style>
        label {
            display: block;
        }
    </style>
    <script>
        /*
            checkbox는 onclick, oninput, onchange 모두 가능하지만
            oninput이 가장 맞는 이벤트 형태
            (구버전에서는 onchange)
        */
        function checkToggle(){
            var checkbox = document.querySelector(".check-all");
            //console.log(checkbox.checked);

            var checkboxList = document.querySelectorAll("input[type=checkbox]:not(.check-all)");
            console.log(checkboxList);

            if(checkbox.checked == true){//전체선택이 체크되었다면
                //모든체크박스를 체크한다
                for(var i=0; i < checkboxList.length; i++){
                    checkboxList[i].checked = true;
                }
            }
            else{//전체선택이 체크해제되었다면
                //모든체크박스를 체크해제한다
                for(var i=0; i < checkboxList.length; i++){
                    checkboxList[i].checked = false;
                }
            }
        }

        //checkToggle 압축버전
        function checkToggle2(){
            var checkbox = document.querySelector(".check-all");
            var checkboxList = document.querySelectorAll("input[type=checkbox]:not(.check-all)");

            for(var i=0; i < checkboxList.length; i++){
                checkboxList[i].checked = checkbox.checked;
            }
        }

        function check(){
            var checkboxList = document.querySelectorAll("input[type=checkbox]:not(.check-all)");
            var count = 0;
            for(var i=0; i < checkboxList.length; i++){
                if(checkboxList[i].checked){//체크되었다면
                    count++;//카운트증가
                }
            }
            //전부다 체크되었으면 count == checkboxList.length

            var checkbox = document.querySelector(".check-all");
            checkbox.checked = (count == checkboxList.length);
        }

        function check2(){
            var checkboxList = document.querySelectorAll("input[type=checkbox]:not(.check-all)");
            var checkboxList2 = document.querySelectorAll("input[type=checkbox]:not(.check-all):checked");

            var checkbox = document.querySelector(".check-all");
            checkbox.checked = (checkboxList.length == checkboxList2.length);
        }
    </script>
</head>
<body>
    <label>
        <input type="checkbox" oninput="checkToggle2();" class="check-all"> 
        <span>전체 선택</span>
    </label>
    <hr>
    <label><input type="checkbox" oninput="check2();"><span>딸기</span></label>
    <label><input type="checkbox" oninput="check2();"><span>포도</span></label>
    <label><input type="checkbox" oninput="check2();"><span>람부탄</span></label>
    <label><input type="checkbox" oninput="check2();"><span>홍시</span></label>
    <label><input type="checkbox" oninput="check2();"><span>두리안</span></label>
    <label><input type="checkbox" oninput="check2();"><span>오렌지</span></label>
    <label><input type="checkbox" oninput="check2();"><span>망고</span></label>
    <label><input type="checkbox" oninput="check2();"><span>파인애플</span></label>
    <label><input type="checkbox" oninput="check2();"><span>용과</span></label>
    <label><input type="checkbox" oninput="check2();"><span>샤인머스켓</span></label>
    <label><input type="checkbox" oninput="check2();"><span>스타후르츠</span></label>
</body>
</html>